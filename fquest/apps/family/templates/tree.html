{% extends "base.html" %}

{% block head %}
<script type='text/javascript'>
  google.load('visualization', '1', {packages:['orgchart']});
  google.setOnLoadCallback(drawChart);
  function drawChart() {
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Name');
    data.addColumn('string', 'Descendent');
    data.addColumn('string', 'Information');
    data.addRows([
      {% for p in persons %}
        [{ v:'{{ p.id }}',
           f:'{{ p.name }}' +
           '<div style="color:red; font-style:italic">' +
             'Born in {{ p.born_in }}' +
             '{% if p.deceased_in %}' +
               '<br>Deceased in {{ p.deceased_in }}' +
             '{% endif %}' +
           '</div>'
         },
         '{% if p.father %}{{ p.father.id}}{% endif %}',
         'test'
        ],
      {% endfor %}
    ]);
    var chart = new google.visualization.OrgChart(
        document.getElementById('chart_div'));
    chart.draw(data, {allowHtml:true});
  }
</script>
{% endblock %}

{% block body %}
<h3>Tree representation for family {{ family.sure_name }}</h3>
<div id='chart_div'></div>
{% endblock %}
